[www]
; CORREÇÃO: Não definir user/group quando não for root
; user = www-data
; group = www-data

; Bind to all interfaces para permitir acesso do Nginx
listen = 127.0.0.1:9000
listen.owner = appuser
listen.group = appgroup

; Process manager configuration (otimizado para Kubernetes)
pm = dynamic
pm.max_children = 20
pm.start_servers = 4
pm.min_spare_servers = 2
pm.max_spare_servers = 8
pm.max_requests = 1000

; Health checks e monitoring para Kubernetes
pm.status_path = /status
ping.path = /ping
ping.response = pong

; Logging (direcionado para stdout/stderr para K8s)
access.log = /proc/self/fd/2
slowlog = /proc/self/fd/2
request_slowlog_timeout = 10s

; Security and performance
request_terminate_timeout = 30s
rlimit_files = 1024
rlimit_core = 0

; Environment variables para Laravel no Kubernetes
clear_env = no
env[APP_ENV] = $APP_ENV
env[APP_VERSION] = $APP_VERSION
env[KUBERNETES_NAMESPACE] = $KUBERNETES_NAMESPACE
env[KUBERNETES_POD_NAME] = $KUBERNETES_POD_NAME

; Configurações específicas para containers
catch_workers_output = yes
decorate_workers_output = no
